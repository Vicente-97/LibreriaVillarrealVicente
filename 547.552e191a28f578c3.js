"use strict";(self.webpackChunkLibreriaVillarrealVicente=self.webpackChunkLibreriaVillarrealVicente||[]).push([[547],{6547:(Zt,x,a)=>{a.r(x),a.d(x,{BooksModule:()=>b});var p=a(6895),s=a(7825),n=a(433),O=a(5226),m=a.n(O),t=a(8256),g=a(2340),y=a(529);class c{constructor(o){this.http=o}getBooks(){return this.http.get(g.N.apiUrl+"/books")}getBooksByCat(o){return this.http.get(g.N.apiUrl+"/booksByCat/"+o)}addBook(o,e){const r=new FormData;return r.append("book",new Blob([JSON.stringify(o)],{type:"application/json"})),r.append("file",e,e.name),this.http.post(`${g.N.apiUrl}/books`,r)}getBook(o){return this.http.get(`${g.N.apiUrl}/books/${o}`)}updateBook(o,e,r){const l=new FormData;return l.append("book",new Blob([JSON.stringify(e)],{type:"application/json"})),l.append("file",r,r.name),this.http.put(`${g.N.apiUrl}/books/${o}`,l)}deletBook(o){return this.http.delete(`${g.N.apiUrl}/books/${o}`)}}c.\u0275fac=function(o){return new(o||c)(t.LFG(y.eN))},c.\u0275prov=t.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"});var C=a(5137),B=a(41),f=a(4696),Z=a(5227);function J(i,o){1&i&&(t.TgZ(0,"span",26),t._uU(1," must be a valid ISBN, it must be a Isbn of more than 5 letters "),t.qZA())}function N(i,o){1&i&&(t.TgZ(0,"span",26),t._uU(1," It must be a title of more than 5 letters and unique "),t.qZA())}function L(i,o){1&i&&(t.TgZ(0,"span",26),t._uU(1," Date is required! "),t.qZA())}function P(i,o){1&i&&(t.TgZ(0,"span",26),t._uU(1," Author is required! "),t.qZA())}function S(i,o){1&i&&(t.TgZ(0,"span",26),t._uU(1," The price must be greater than 5 "),t.qZA())}function M(i,o){1&i&&(t.TgZ(0,"span",26),t._uU(1," The stock must be greater than 5 "),t.qZA())}function Q(i,o){if(1&i&&(t.TgZ(0,"option",27),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e.name),t.xp6(1),t.hij(" ",e.name," ")}}const Y=function(){return["/books/list"]};class v{constructor(o,e,r,l,u){this.fb=o,this.router=e,this.servicio=r,this.servicioCat=l,this.servicioUser=u,this.categories=[],this.json={isbn:"",title:"",dateBook:"",author:"",price:"",stock:"",category:""},this.myForm=this.fb.group({isbn:["",[n.kI.required,n.kI.minLength(5)]],title:["",[n.kI.required,n.kI.minLength(5)]],date:["",[n.kI.required]],author:["",[n.kI.required]],price:["",[n.kI.required,n.kI.min(5)]],stock:["",[n.kI.required,n.kI.min(5)]],opcionSeleccionado:["",[n.kI.required]],fotoPerfil:["",[n.kI.required]],fileSource:["",[n.kI.required]]})}ngOnInit(){this.servicioCat.getCategories().subscribe({next:o=>{this.categories=o},error:o=>{console.log(o)}})}isValidField(o){return this.myForm?.controls[o].errors&&this.myForm?.controls[o].touched&&this.myForm?.controls[o].invalid}saveAdd(){this.json.isbn=this.myForm.get("isbn")?.value,this.json.title=this.myForm.get("title")?.value,this.json.dateBook=this.myForm.get("date")?.value,this.json.author=this.myForm.get("author")?.value,this.json.price=this.myForm.get("price")?.value,this.json.stock=this.myForm.get("stock")?.value,this.servicioCat.getCategoryId(this.myForm.get("opcionSeleccionado")?.value).subscribe({next:o=>{this.category=o,this.json.category=this.category,this.servicio.addBook(this.json,this.myForm.get("fileSource")?.value).subscribe({next:e=>{e&&(window.location.reload(),this.myForm.reset(),m().fire({icon:"success",title:"Book successfully added",text:"\xa1Book added!"}),this.router.navigate(["/"]))},error:e=>{m().fire({icon:"error",title:"Oops...",text:"Something has gone wrong!"}),this.router.navigate(["/"])}})}})}save(){this.myForm.valid&&this.myForm.markAllAsTouched()}onFileChange(o){console.log(o),o.target.files.length>0&&this.myForm.patchValue({fileSource:o.target.files[0]})}}v.\u0275fac=function(o){return new(o||v)(t.Y36(n.qu),t.Y36(s.F0),t.Y36(c),t.Y36(C.H),t.Y36(B.K))},v.\u0275cmp=t.Xpm({type:v,selectors:[["app-add-book"]],decls:85,vars:11,consts:[[1,"section"],[1,"container","py-5"],[1,"row"],[1,"col-lg-12"],[1,"card","mb-4"],[1,"titulo"],["action","#","enctype","multipart/form-data",1,"form",3,"formGroup","ngSubmit"],[1,"card-body"],[1,"col-sm-3"],[1,"mb-0"],[1,"col-sm-9"],["type","text","placeholder","Isbn","formControlName","isbn",1,"form-control"],[1,"fa","fa-user","form-control-feedback"],["class","form-text text-danger",4,"ngIf"],["type","text","placeholder","title","formControlName","title",1,"form-control"],["type","date","placeholder","Date Book","formControlName","date",1,"form-control"],["type","text","placeholder","Author","formControlName","author",1,"form-control"],["type","number","placeholder","price","formControlName","price",1,"form-control"],["type","number","placeholder","Stock","formControlName","stock",1,"form-control"],["name","opcionSeleccionado","aria-labelledby","state","aria-label","State","formControlName","opcionSeleccionado"],[3,"value",4,"ngFor","ngForOf"],["type","file","placeholder","Photo","formControlName","fotoPerfil","name","fotoPerfil",1,"form-control",3,"change"],[1,"fa","fa-lock","form-control-feedback"],["align","right"],["type","submit",1,"btn","btn-primary","espacioButton",3,"disabled"],["button","","type","button","href","#","routerLinkActive","active",1,"btn","btn-danger",3,"routerLink"],[1,"form-text","text-danger"],[3,"value"]],template:function(o,e){1&o&&(t._UZ(0,"app-navbar"),t.TgZ(1,"section",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h3",5),t._uU(7,"Add Book"),t.qZA(),t.TgZ(8,"form",6),t.NdJ("ngSubmit",function(){return e.saveAdd()}),t.TgZ(9,"div",7)(10,"div",2)(11,"div",8)(12,"p",9),t._uU(13,"Isbn"),t.qZA()(),t.TgZ(14,"div",10),t._UZ(15,"input",11)(16,"i",12),t.YNc(17,J,2,0,"span",13),t.qZA()(),t._UZ(18,"hr"),t.TgZ(19,"div",2)(20,"div",8)(21,"p",9),t._uU(22,"Tittle:"),t.qZA()(),t.TgZ(23,"div",10),t._UZ(24,"input",14)(25,"i",12),t.YNc(26,N,2,0,"span",13),t.qZA()(),t._UZ(27,"hr"),t.TgZ(28,"div",2)(29,"div",8)(30,"p",9),t._uU(31,"Date:"),t.qZA()(),t.TgZ(32,"div",10),t._UZ(33,"input",15)(34,"i",12),t.YNc(35,L,2,0,"span",13),t.qZA()(),t._UZ(36,"hr"),t.TgZ(37,"div",2)(38,"div",8)(39,"p",9),t._uU(40,"Author:"),t.qZA()(),t.TgZ(41,"div",10),t._UZ(42,"input",16)(43,"i",12),t.YNc(44,P,2,0,"span",13),t.qZA()(),t._UZ(45,"hr"),t.TgZ(46,"div",2)(47,"div",8)(48,"p",9),t._uU(49,"Price:"),t.qZA()(),t.TgZ(50,"div",10),t._UZ(51,"input",17)(52,"i",12),t.YNc(53,S,2,0,"span",13),t.qZA()(),t._UZ(54,"hr"),t.TgZ(55,"div",2)(56,"div",8)(57,"p",9),t._uU(58,"Stock:"),t.qZA()(),t.TgZ(59,"div",10),t._UZ(60,"input",18)(61,"i",12),t.YNc(62,M,2,0,"span",13),t.qZA(),t._UZ(63,"hr"),t.TgZ(64,"div",2)(65,"div",8)(66,"p",9),t._uU(67,"Category:"),t.qZA()(),t.TgZ(68,"div",10)(69,"select",19),t.YNc(70,Q,2,2,"option",20),t.qZA()()(),t._UZ(71,"hr"),t.TgZ(72,"div",2)(73,"div",8)(74,"p",9),t._uU(75,"Picture:"),t.qZA()(),t.TgZ(76,"div",10)(77,"input",21),t.NdJ("change",function(l){return e.onFileChange(l)}),t.qZA(),t._UZ(78,"i",22),t.qZA()(),t.TgZ(79,"div",23)(80,"button",24),t._uU(81,"Add Book"),t.qZA(),t.TgZ(82,"button",25),t._uU(83,"Back"),t.qZA()()()()()()()()()(),t._UZ(84,"app-footer")),2&o&&(t.xp6(8),t.Q6J("formGroup",e.myForm),t.xp6(9),t.Q6J("ngIf",e.isValidField("isbn")),t.xp6(9),t.Q6J("ngIf",e.isValidField("title")),t.xp6(9),t.Q6J("ngIf",e.isValidField("date")),t.xp6(9),t.Q6J("ngIf",e.isValidField("author")),t.xp6(9),t.Q6J("ngIf",e.isValidField("price")),t.xp6(9),t.Q6J("ngIf",e.isValidField("stock")),t.xp6(8),t.Q6J("ngForOf",e.categories),t.xp6(10),t.Q6J("disabled",e.myForm.invalid),t.xp6(2),t.Q6J("routerLink",t.DdM(10,Y)))},dependencies:[p.sg,p.O5,f.S,Z.c,n._Y,n.YN,n.Kr,n.Fj,n.wV,n.EJ,n.JJ,n.JL,s.rH,s.Od,n.sg,n.u],styles:["#page-container[_ngcontent-%COMP%]{position:relative;min-height:100vh}#content-wrap[_ngcontent-%COMP%]{padding-bottom:2.5rem}#footer[_ngcontent-%COMP%]{position:absolute;bottom:0;width:100%;height:2.5rem}.espacioButton[_ngcontent-%COMP%]{margin:1em}.section[_ngcontent-%COMP%]{background-image:url(https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fimages6.alphacoders.com%2F348%2F348731.jpg&f=1&nofb=1&ipt=43d103699677cdeb562e799ab7081dbeb17a3b12cd375df1589e22de846d2a20&ipo=images)}.titulo[_ngcontent-%COMP%]{padding-left:1em}"]});const j=function(){return["/books/list"]};class _{constructor(o,e,r,l,u){this.route=o,this.servicio=e,this.servicioCat=r,this.fb=l,this.routes=u,this.book={},this.category={},this.myForm=this.fb.group({isbn:["",[n.kI.required,n.kI.minLength(3)]],title:["",[n.kI.required,n.kI.minLength(5)]],date:["",[n.kI.required]],author:["",[n.kI.required]],price:["",[n.kI.required,n.kI.min(5)]],stock:["",[n.kI.required,n.kI.min(5)]]})}ngOnInit(){this.servicio.getBook(this.route.snapshot.params.id).subscribe({next:e=>{this.book=e,this.servicioCat.getCategoryId(this.book.category.name).subscribe({next:r=>{this.category=r,console.log(this.category)}})}})}saveDelete(){this.servicio.deletBook(this.book.isbn).subscribe({next:o=>{o&&(this.myForm.reset(),m().fire({icon:"success",title:" Book Deleted",text:"\xa1sucess Book Deleted!"}),this.routes.navigate(["/books/list"]))},error:o=>{m().fire({icon:"error",title:"Oops...",text:"Cant delete Book"})}})}save(){this.myForm.valid&&this.myForm.markAllAsTouched()}}_.\u0275fac=function(o){return new(o||_)(t.Y36(s.gz),t.Y36(c),t.Y36(C.H),t.Y36(n.qu),t.Y36(s.F0))},_.\u0275cmp=t.Xpm({type:_,selectors:[["app-delete-book"]],decls:73,vars:12,consts:[["id","navbar"],[1,"section"],[1,"container","py-5"],[1,"row"],[1,"col-lg-12"],[1,"card","mb-4"],["action","#",1,"form",3,"formGroup","ngSubmit"],["align","center",1,"form-group"],["for","input2"],["alt","avatar",1,"rounded-circle","img-fluid","imgRedonda",3,"src"],[1,"form-group"],[1,"card-body"],[1,"col-sm-3"],[1,"mb-0"],[1,"col-sm-9"],["type","text","placeholder","Isbn","formControlName","isbn","readonly","",1,"form-control",3,"value"],["type","text","placeholder","title","formControlName","title","readonly","",1,"form-control",3,"value"],["type","date","placeholder","Date Book","formControlName","date","readonly","",1,"form-control",3,"value"],[1,"fa","fa-user","form-control-feedback"],["type","text","placeholder","Author","formControlName","author","readonly","",1,"form-control",3,"value"],["type","number","placeholder","price","formControlName","price","readonly","",1,"form-control",3,"value"],["type","number","placeholder","Stock","formControlName","stock","readonly","",1,"form-control",3,"value"],["type","text","formControlName","stock","readonly","",1,"form-control",3,"value"],["align","right"],["type","submit",1,"btn","btn-danger","espacioButton",3,"disabled"],["button","","type","button","href","#","routerLinkActive","active",1,"btn","btn-primary",3,"routerLink"],["id","footer"]],template:function(o,e){1&o&&(t._UZ(0,"app-navbar",0),t.TgZ(1,"section",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3"),t._uU(7,"Delete Book"),t.qZA(),t.TgZ(8,"form",6),t.NdJ("ngSubmit",function(){return e.saveDelete()}),t.TgZ(9,"div",7),t._UZ(10,"label",8)(11,"img",9),t.qZA(),t.TgZ(12,"div",10)(13,"div",11)(14,"div",3)(15,"div",12)(16,"p",13),t._uU(17,"Isbn:"),t.qZA()(),t.TgZ(18,"div",14),t._UZ(19,"input",15),t.qZA()(),t._UZ(20,"hr"),t.TgZ(21,"div",3)(22,"div",12)(23,"p",13),t._uU(24,"Title:"),t.qZA()(),t.TgZ(25,"div",14),t._UZ(26,"input",16),t.qZA()(),t._UZ(27,"hr"),t.TgZ(28,"div",3)(29,"div",12)(30,"p",13),t._uU(31,"Date:"),t.qZA()(),t.TgZ(32,"div",14),t._UZ(33,"input",17)(34,"i",18),t.qZA()(),t._UZ(35,"hr"),t.TgZ(36,"div",3)(37,"div",12)(38,"p",13),t._uU(39,"Author:"),t.qZA()(),t.TgZ(40,"div",14),t._UZ(41,"input",19)(42,"i",18),t.qZA()(),t._UZ(43,"hr"),t.TgZ(44,"div",3)(45,"div",12)(46,"p",13),t._uU(47,"Price:"),t.qZA()(),t.TgZ(48,"div",14),t._UZ(49,"input",20)(50,"i",18),t.qZA()(),t._UZ(51,"hr"),t.TgZ(52,"div",3)(53,"div",12)(54,"p",13),t._uU(55,"Stock:"),t.qZA()(),t.TgZ(56,"div",14),t._UZ(57,"input",21)(58,"i",18),t.qZA()(),t._UZ(59,"hr"),t.TgZ(60,"div",3)(61,"div",12)(62,"p",13),t._uU(63,"Category:"),t.qZA()(),t.TgZ(64,"div",14),t._UZ(65,"input",22)(66,"i",18),t.qZA()(),t.TgZ(67,"div",23)(68,"button",24),t._uU(69,"Delete Book"),t.qZA(),t.TgZ(70,"button",25),t._uU(71,"Back"),t.qZA()()()()()()()()()(),t._UZ(72,"app-footer",26)),2&o&&(t.xp6(8),t.Q6J("formGroup",e.myForm),t.xp6(3),t.s9C("src",e.book.img,t.LSH),t.xp6(8),t.Q6J("value",e.book.isbn),t.xp6(7),t.Q6J("value",e.book.title),t.xp6(7),t.Q6J("value",e.book.dateBook),t.xp6(8),t.Q6J("value",e.book.author),t.xp6(8),t.Q6J("value",e.book.price),t.xp6(8),t.Q6J("value",e.book.stock),t.xp6(8),t.Q6J("value",e.category.name),t.xp6(3),t.Q6J("disabled",e.save()),t.xp6(2),t.Q6J("routerLink",t.DdM(11,j)))},dependencies:[f.S,Z.c,n._Y,n.Fj,n.wV,n.JJ,n.JL,s.rH,s.Od,n.sg,n.u],styles:[".imgRedonda[_ngcontent-%COMP%]{width:120px;height:125px;border-radius:100px}#page-container[_ngcontent-%COMP%]{position:relative;min-height:100vh}#content-wrap[_ngcontent-%COMP%]{padding-bottom:2.5rem}#footer[_ngcontent-%COMP%]{position:absolute;bottom:0;width:100%;height:2.5rem}.espacioButton[_ngcontent-%COMP%]{margin:1em}.section[_ngcontent-%COMP%]{background-image:url(https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fimages6.alphacoders.com%2F348%2F348731.jpg&f=1&nofb=1&ipt=43d103699677cdeb562e799ab7081dbeb17a3b12cd375df1589e22de846d2a20&ipo=images)}"]});var d=a(7340),D=a(6217),V=a(9298),T=a(7318),$=a(805),F=a(5593),I=a(1740);function z(i,o){1&i&&(t.TgZ(0,"tr")(1,"th",15),t._uU(2,"Isbn"),t._UZ(3,"p-sortIcon",16),t.qZA(),t.TgZ(4,"th"),t._uU(5,"Imagen"),t.qZA(),t.TgZ(6,"th",17),t._uU(7,"Title"),t._UZ(8,"p-sortIcon",18),t.qZA(),t.TgZ(9,"th"),t._uU(10,"dateBook"),t.qZA(),t.TgZ(11,"th",19),t._uU(12,"Author"),t._UZ(13,"p-sortIcon",20),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Category"),t.qZA(),t.TgZ(16,"th",21),t._uU(17,"Price"),t._UZ(18,"p-sortIcon",22),t.qZA(),t.TgZ(19,"th"),t._uU(20,"stock"),t.qZA()())}const H=function(i){return["/books/updateBook/",i]};function R(i,o){if(1&i&&(t.TgZ(0,"button",27),t.O4$(),t.TgZ(1,"svg",28),t._UZ(2,"path",29),t.qZA(),t._uU(3," \xa0Edit \xa0"),t.qZA()),2&i){const e=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(1,H,e.isbn))}}const E=function(i){return["/books/deleteBook/",i]};function G(i,o){if(1&i&&(t.TgZ(0,"button",30),t.O4$(),t.TgZ(1,"svg",31),t._UZ(2,"path",32),t.qZA(),t._uU(3," \xa0 Delete \xa0"),t.qZA()),2&i){const e=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(1,E,e.isbn))}}function K(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"button",33),t.NdJ("click",function(){t.CHM(e);const l=t.oxw().$implicit,u=t.oxw(2);return t.KtG(u.addToCart(l))}),t.O4$(),t.TgZ(1,"svg",34),t._UZ(2,"path",35),t.qZA(),t._uU(3," \xa0 Add to Cart\xa0"),t.qZA()}}function X(i,o){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"img",23),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t.YNc(18,R,4,3,"button",24),t._uU(19," \xa0 "),t.YNc(20,G,4,3,"button",25),t._uU(21," \xa0 "),t.YNc(22,K,4,0,"button",26),t.qZA()()),2&i){const e=o.$implicit,r=t.oxw(2);t.xp6(2),t.Oqu(e.isbn),t.xp6(2),t.Q6J("src",e.img,t.LSH),t.xp6(2),t.Oqu(e.title),t.xp6(2),t.Oqu(e.dateBook),t.xp6(2),t.Oqu(e.author),t.xp6(2),t.Oqu(e.category.name),t.xp6(2),t.Oqu(e.price),t.xp6(2),t.Oqu(e.stock),t.xp6(2),t.Q6J("ngIf",r.isAdmin),t.xp6(2),t.Q6J("ngIf",r.isAdmin),t.xp6(2),t.Q6J("ngIf","0"!=e.stock&&0==r.isAdmin&&null!=r.jwt)}}const W=function(){return[10,20]};function tt(i,o){if(1&i&&(t.TgZ(0,"p-table",11,12),t.YNc(2,z,21,0,"ng-template",13),t.YNc(3,X,23,11,"ng-template",14),t.qZA()),2&i){const e=t.oxw();t.Q6J("value",e.books)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(5,W))}}class k{constructor(o,e,r){this.bookServ=o,this.shopping=e,this.servicio=r,this.isAdmin=!1,this.jwt=null,this.books=[],this.booksFullDatos=[]}addToCart(o){this.shopping.agregarAlCarrito(o),window.sessionStorage.setItem("carrito",JSON.stringify(this.shopping.books))}filtrar(){this.books=0!=this.filtroNombre.trim().length?this.books.filter(o=>o.title.toLowerCase().includes(this.filtroNombre.toLowerCase())):this.booksFullDatos}ngOnInit(){this.getBooks(),this.jwt=localStorage.getItem("jwt"),this.jwt&&(this.isAdmin=this.servicio.isUserAdmin(this.jwt))}getBooks(){this.bookServ.getBooks().subscribe({next:o=>{this.books=o,this.booksFullDatos=o}})}onSelect({selected:o}){this.selected.splice(0,this.selected.length),this.selected.push(...o)}onActivate(o){console.log(o)}}function ot(i,o){1&i&&(t.TgZ(0,"span",29),t._uU(1," Debe de ser un isbn v\xe1lido "),t.qZA())}function et(i,o){1&i&&(t.TgZ(0,"span",29),t._uU(1," Debe de ser un titulo de m\xe1s de 5 letras y unico. "),t.qZA())}function it(i,o){1&i&&(t.TgZ(0,"span",29),t._uU(1," La fecha es requerida. "),t.qZA())}function nt(i,o){1&i&&(t.TgZ(0,"span",29),t._uU(1," El campo author es requerido. "),t.qZA())}function rt(i,o){1&i&&(t.TgZ(0,"span",29),t._uU(1," el precio debe de ser mayor de 5 "),t.qZA())}function at(i,o){1&i&&(t.TgZ(0,"span",29),t._uU(1," Debe de tener un stock mayor que 5 "),t.qZA())}function st(i,o){if(1&i&&(t.TgZ(0,"option",30),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e.name),t.xp6(1),t.hij(" ",e.name," ")}}k.\u0275fac=function(o){return new(o||k)(t.Y36(c),t.Y36(D.F),t.Y36(V.e))},k.\u0275cmp=t.Xpm({type:k,selectors:[["app-list"]],decls:18,vars:2,consts:[[1,"container-fluid"],[1,"col"],[1,"row"],[1,"col-md-6"],[1,"m-4"],[1,"row","d-flex","justify-content-center","w-100"],[1,"col-6"],["align","right",1,"col-6","mb-4"],["pInputText","","placeholder","Search a title....",3,"ngModel","ngModelChange","keydown.enter"],["pButton","",3,"click"],["aria-label","Tabla de datos con informaci\xf3n de productos","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","class","my-datatable",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions",4,"ngIf"],["aria-label","Tabla de datos con informaci\xf3n de productos","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",1,"my-datatable",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pSortableColumn","isbn"],["field","isbn"],["pSortableColumn","title"],["field","title"],["pSortableColumn","author"],["field","author"],["pSortableColumn","price"],["field","price"],["width","120","height","120","alt","imagenBook",3,"src"],["pButton","","icon","pi pi-pencil","aria-label","boton","aria-labelledby","boton","title","boton","class","btn btn-primary","href","#",3,"routerLink",4,"ngIf"],["pButton","","class","btn btn-danger botonRojo","href","#",3,"routerLink",4,"ngIf"],["pButton","","class","btn btn-danger botonAmarillo text-white ","href","#",3,"click",4,"ngIf"],["pButton","","icon","pi pi-pencil","aria-label","boton","aria-labelledby","boton","title","boton","href","#",1,"btn","btn-primary",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-pencil"],["d","M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"],["pButton","","href","#",1,"btn","btn-danger","botonRojo",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-trash3-fill"],["d","M11 1.5v1h3.5a.5.5 0 0 1 0 1h-.538l-.853 10.66A2 2 0 0 1 11.115 16h-6.23a2 2 0 0 1-1.994-1.84L2.038 3.5H1.5a.5.5 0 0 1 0-1H5v-1A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5Zm-5 0v1h4v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5ZM4.5 5.029l.5 8.5a.5.5 0 1 0 .998-.06l-.5-8.5a.5.5 0 1 0-.998.06Zm6.53-.528a.5.5 0 0 0-.528.47l-.5 8.5a.5.5 0 0 0 .998.058l.5-8.5a.5.5 0 0 0-.47-.528ZM8 4.5a.5.5 0 0 0-.5.5v8.5a.5.5 0 0 0 1 0V5a.5.5 0 0 0-.5-.5Z"],["pButton","","href","#",1,"btn","btn-danger","botonAmarillo","text-white",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-cart-check-fill"],["d","M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1H.5zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-1.646-7.646-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L8 8.293l2.646-2.647a.5.5 0 0 1 .708.708z"]],template:function(o,e){1&o&&(t._UZ(0,"app-navbar"),t.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h1",4),t._uU(6,"Book List"),t.qZA()()(),t.TgZ(7,"div",5)(8,"div",2),t._UZ(9,"div",6),t.TgZ(10,"div",7)(11,"h5"),t._uU(12,"Filtering by title: "),t.qZA(),t.TgZ(13,"input",8),t.NdJ("ngModelChange",function(l){return e.filtroNombre=l})("keydown.enter",function(){return e.filtrar()}),t.qZA(),t.TgZ(14,"button",9),t.NdJ("click",function(){return e.filtrar()}),t._uU(15,"Filtrar"),t.qZA()()(),t.YNc(16,tt,4,6,"p-table",10),t.qZA()()(),t._UZ(17,"app-footer")),2&o&&(t.xp6(13),t.Q6J("ngModel",e.filtroNombre),t.xp6(3),t.Q6J("ngIf",e.books))},dependencies:[p.O5,f.S,Z.c,T.iA,$.jx,T.lQ,T.fz,F.Hq,n.Fj,n.JJ,n.On,s.rH,I.o],styles:["table[_ngcontent-%COMP%]{width:100%;margin:0 auto;border-collapse:collapse}.botonRojo[_ngcontent-%COMP%]{background-color:red}.botonAmarillo[_ngcontent-%COMP%]{background-color:#2216c5}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid #dddddd;text-align:center;padding:8px}th[_ngcontent-%COMP%]{background-color:#ddd}@media (max-width: 600px){td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{display:block;border:none;text-align:left}td[_ngcontent-%COMP%]{border-bottom:1px solid #dddddd;position:relative;text-align:center}td[_ngcontent-%COMP%]:before{position:absolute;left:0;top:0;width:50%;padding-right:10px;white-space:nowrap;content:attr(data-label);float:left;font-weight:700;text-transform:uppercase}p-datatable.beatDatatable[_ngcontent-%COMP%]   .ui-datatable[_ngcontent-%COMP%]   .ui-datatable-thead[_ngcontent-%COMP%]   .ui-state-default[_ngcontent-%COMP%]{color:#000!important;line-height:2!important;text-align:center!important}.some-custom-class-name[_ngcontent-%COMP%]  th{background-color:#00f!important}}"],data:{animation:[(0,d.X$)("agregarProducto",[(0,d.SB)("void",(0,d.oB)({transform:"scale(0)"})),(0,d.eR)(":enter",[(0,d.jt)("0.2s ease-out",(0,d.oB)({transform:"scale(1.2)"})),(0,d.jt)("0.2s",(0,d.oB)({transform:"scale(1)"}))])])]}});const lt=function(){return["/books/list"]};class A{constructor(o,e,r,l,u,ft){this.route=o,this.fb=e,this.router=r,this.servicio=l,this.servicioCat=u,this.servicioUser=ft,this.categories=[],this.book={},this.json={isbn:"",title:"",dateBook:"",author:"",price:"",stock:"",category:""},this.myForm=this.fb.group({isbn:["",[n.kI.required,n.kI.minLength(3)]],title:["",[n.kI.required,n.kI.minLength(5)]],date:["",[n.kI.required]],author:["",[n.kI.required]],price:["",[n.kI.required,n.kI.min(5)]],stock:["",[n.kI.required,n.kI.min(5)]],opcionSeleccionado:["",[n.kI.required]],fotoPerfil:["",[n.kI.required]],fileSource:["",[n.kI.required]]})}ngOnInit(){this.servicioCat.getCategories().subscribe({next:e=>{this.categories=e},error:e=>{console.log(e)}}),this.servicio.getBook(this.route.snapshot.params.id).subscribe({next:e=>{this.book=e}})}isValidField(o){return this.myForm?.controls[o].errors&&this.myForm?.controls[o].touched&&this.myForm?.controls[o].invalid}saveUpdate(){this.json.isbn=this.book.isbn,this.json.title=this.myForm.get("title")?.value,this.json.dateBook=this.myForm.get("date")?.value,this.json.author=this.myForm.get("author")?.value,this.json.price=this.myForm.get("price")?.value,this.json.stock=this.myForm.get("stock")?.value,this.servicioCat.getCategoryId(this.myForm.get("opcionSeleccionado")?.value).subscribe({next:o=>{this.category=o,this.json.category=this.category,this.servicio.updateBook(this.book.isbn,this.json,this.myForm.get("fileSource")?.value).subscribe({next:e=>{e&&(window.location.reload(),this.myForm.reset(),m().fire({icon:"success",title:"Libro Actualizado con \xe9xito",text:"\xa1Libro Actualizado!"}))},error:e=>{m().fire({icon:"error",title:"Oops...",text:"El libro no se puede Actualizar."})}})}})}save(){this.myForm.valid&&this.myForm.markAllAsTouched()}onFileChange(o){console.log(o),o.target.files.length>0&&this.myForm.patchValue({fileSource:o.target.files[0]})}}A.\u0275fac=function(o){return new(o||A)(t.Y36(s.gz),t.Y36(n.qu),t.Y36(s.F0),t.Y36(c),t.Y36(C.H),t.Y36(B.K))},A.\u0275cmp=t.Xpm({type:A,selectors:[["app-update-book"]],decls:88,vars:18,consts:[[1,"section"],[1,"container","py-5"],[1,"row"],[1,"col-lg-12"],[1,"card","mb-4"],[1,"titulo"],["action","#","enctype","multipart/form-data",1,"form",3,"formGroup","ngSubmit"],["align","center",1,"form-group"],["for","input2"],["alt","avatar",1,"rounded-circle","img-fluid","imgRedonda",3,"src"],[1,"card-body"],[1,"col-sm-3"],[1,"mb-0"],[1,"col-sm-9"],["type","text","placeholder","Isbn","readonly","",1,"form-control",3,"value"],[1,"fa","fa-user","form-control-feedback"],["class","form-text text-danger",4,"ngIf"],["type","text","placeholder","title","formControlName","title",1,"form-control",3,"placeholder"],["type","date","placeholder","Date Book","formControlName","date",1,"form-control",3,"placeholder"],["type","text","placeholder","Author","formControlName","author",1,"form-control",3,"placeholder"],["type","number","placeholder","price","formControlName","price",1,"form-control",3,"placeholder"],["type","number","placeholder","Stock","formControlName","stock",1,"form-control",3,"placeholder"],["name","opcionSeleccionado","formControlName","opcionSeleccionado"],[3,"value",4,"ngFor","ngForOf"],["type","file","placeholder","Photo","formControlName","fotoPerfil","name","fotoPerfil",1,"form-control",3,"change"],[1,"fa","fa-lock","form-control-feedback"],["align","right"],["type","submit",1,"btn","btn-primary","espacioButton",3,"disabled"],["button","","type","button","href","#","routerLinkActive","active",1,"btn","btn-danger",3,"routerLink"],[1,"form-text","text-danger"],[3,"value"]],template:function(o,e){1&o&&(t._UZ(0,"app-navbar"),t.TgZ(1,"section",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h3",5),t._uU(7,"Update book"),t.qZA(),t.TgZ(8,"form",6),t.NdJ("ngSubmit",function(){return e.saveUpdate()}),t.TgZ(9,"div",7),t._UZ(10,"label",8)(11,"img",9),t.qZA(),t.TgZ(12,"div",10)(13,"div",2)(14,"div",11)(15,"p",12),t._uU(16,"Isbn"),t.qZA()(),t.TgZ(17,"div",13),t._UZ(18,"input",14)(19,"i",15),t.YNc(20,ot,2,0,"span",16),t.qZA()(),t._UZ(21,"hr"),t.TgZ(22,"div",2)(23,"div",11)(24,"p",12),t._uU(25,"T\xedtulo:"),t.qZA()(),t.TgZ(26,"div",13),t._UZ(27,"input",17)(28,"i",15),t.YNc(29,et,2,0,"span",16),t.qZA()(),t._UZ(30,"hr"),t.TgZ(31,"div",2)(32,"div",11)(33,"p",12),t._uU(34,"Fecha :"),t.qZA()(),t.TgZ(35,"div",13),t._UZ(36,"input",18)(37,"i",15),t.YNc(38,it,2,0,"span",16),t.qZA()(),t._UZ(39,"hr"),t.TgZ(40,"div",2)(41,"div",11)(42,"p",12),t._uU(43,"author:"),t.qZA()(),t.TgZ(44,"div",13),t._UZ(45,"input",19)(46,"i",15),t.YNc(47,nt,2,0,"span",16),t.qZA()(),t._UZ(48,"hr"),t.TgZ(49,"div",2)(50,"div",11)(51,"p",12),t._uU(52,"Price:"),t.qZA()(),t.TgZ(53,"div",13),t._UZ(54,"input",20)(55,"i",15),t.YNc(56,rt,2,0,"span",16),t.qZA()(),t._UZ(57,"hr"),t.TgZ(58,"div",2)(59,"div",11)(60,"p",12),t._uU(61,"Stock:"),t.qZA()(),t.TgZ(62,"div",13),t._UZ(63,"input",21)(64,"i",15),t.YNc(65,at,2,0,"span",16),t.qZA(),t._UZ(66,"hr"),t.TgZ(67,"div",2)(68,"div",11)(69,"p",12),t._uU(70,"Category:"),t.qZA()(),t.TgZ(71,"div",13)(72,"select",22),t.YNc(73,st,2,2,"option",23),t.qZA()()(),t._UZ(74,"hr"),t.TgZ(75,"div",2)(76,"div",11)(77,"p",12),t._uU(78,"Picture:"),t.qZA()(),t.TgZ(79,"div",13)(80,"input",24),t.NdJ("change",function(l){return e.onFileChange(l)}),t.qZA(),t._UZ(81,"i",25),t.qZA()(),t.TgZ(82,"div",26)(83,"button",27),t._uU(84,"Update Book"),t.qZA(),t.TgZ(85,"button",28),t._uU(86,"Back"),t.qZA()()()()()()()()()(),t._UZ(87,"app-footer")),2&o&&(t.xp6(8),t.Q6J("formGroup",e.myForm),t.xp6(3),t.s9C("src",e.book.img,t.LSH),t.xp6(7),t.Q6J("value",e.book.isbn),t.xp6(2),t.Q6J("ngIf",e.isValidField("isbn")),t.xp6(7),t.Q6J("placeholder",e.book.title),t.xp6(2),t.Q6J("ngIf",e.isValidField("title")),t.xp6(7),t.Q6J("placeholder",e.book.dateBook),t.xp6(2),t.Q6J("ngIf",e.isValidField("date")),t.xp6(7),t.Q6J("placeholder",e.book.author),t.xp6(2),t.Q6J("ngIf",e.isValidField("author")),t.xp6(7),t.Q6J("placeholder",e.book.price),t.xp6(2),t.Q6J("ngIf",e.isValidField("price")),t.xp6(7),t.Q6J("placeholder",e.book.stock),t.xp6(2),t.Q6J("ngIf",e.isValidField("stock")),t.xp6(8),t.Q6J("ngForOf",e.categories),t.xp6(10),t.Q6J("disabled",e.save()),t.xp6(2),t.Q6J("routerLink",t.DdM(17,lt)))},dependencies:[p.sg,p.O5,f.S,Z.c,n._Y,n.YN,n.Kr,n.Fj,n.wV,n.EJ,n.JJ,n.JL,s.rH,s.Od,n.sg,n.u],styles:["#page-container[_ngcontent-%COMP%]{position:relative;min-height:100vh}#content-wrap[_ngcontent-%COMP%]{padding-bottom:2.5rem}#footer[_ngcontent-%COMP%]{position:absolute;bottom:0;width:100%;height:2.5rem}.espacioButton[_ngcontent-%COMP%]{margin:1em}.section[_ngcontent-%COMP%]{background-image:url(https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fimages6.alphacoders.com%2F348%2F348731.jpg&f=1&nofb=1&ipt=43d103699677cdeb562e799ab7081dbeb17a3b12cd375df1589e22de846d2a20&ipo=images)}.imgRedonda[_ngcontent-%COMP%]{width:120px;height:125px;border-radius:100px}"]});var q=a(6752);function ct(i,o){if(1&i&&(t.O4$(),t.kcU(),t.TgZ(0,"div",7),t._UZ(1,"img",8),t.TgZ(2,"div",9)(3,"h5",10),t._uU(4),t.qZA(),t.TgZ(5,"label")(6,"b"),t._uU(7,"Isbn:"),t.qZA()(),t.TgZ(8,"p",11),t._uU(9),t.qZA(),t.TgZ(10,"label")(11,"b"),t._uU(12,"Date book:"),t.qZA()(),t.TgZ(13,"p",11),t._uU(14),t.qZA(),t.TgZ(15,"label")(16,"b"),t._uU(17,"Price:"),t.qZA()(),t.TgZ(18,"p",11),t._uU(19),t.qZA(),t.TgZ(20,"label")(21,"b"),t._uU(22,"Stock:"),t.qZA()(),t.TgZ(23,"p",11),t._uU(24),t.qZA(),t._UZ(25,"br"),t.qZA()()),2&i){const e=o.$implicit;t.xp6(1),t.s9C("src",e.img,t.LSH),t.xp6(3),t.Oqu(e.title),t.xp6(5),t.Oqu(e.isbn),t.xp6(5),t.Oqu(e.dateBook),t.xp6(5),t.Oqu(e.price),t.xp6(5),t.Oqu(e.stock)}}const w=function(){return["/category/list"]};function pt(i,o){if(1&i&&(t.TgZ(0,"div",1)(1,"div",2)(2,"button",3),t.O4$(),t.TgZ(3,"svg",4),t._UZ(4,"path",5),t.qZA(),t._uU(5,"Back"),t.qZA()(),t.YNc(6,ct,26,6,"div",6),t.qZA()),2&i){const e=t.oxw();t.xp6(2),t.Q6J("routerLink",t.DdM(2,w)),t.xp6(4),t.Q6J("ngForOf",e.books)}}function dt(i,o){1&i&&(t.TgZ(0,"div",1)(1,"h4"),t._uU(2,"We don't have books of that category"),t.qZA(),t.TgZ(3,"div",12)(4,"button",3),t.O4$(),t.TgZ(5,"svg",4),t._UZ(6,"path",5),t.qZA(),t._uU(7,"\xa0Back"),t.qZA()()()),2&i&&(t.xp6(4),t.Q6J("routerLink",t.DdM(1,w)))}class U{constructor(o,e){this.route=o,this.servicio=e,this.books=[]}ngOnInit(){this.servicio.getBooksByCat(this.route.snapshot.params.id).subscribe({next:e=>{this.books=e},error:e=>{}})}}U.\u0275fac=function(o){return new(o||U)(t.Y36(s.gz),t.Y36(c))},U.\u0275cmp=t.Xpm({type:U,selectors:[["app-list-by-cat"]],decls:4,vars:2,consts:[["class","row",4,"ngIf"],[1,"row"],[1,"espacio"],["button","","type","button","href","#","routerLinkActive","active",1,"btn","btn-danger",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-arrow-left-circle-fill"],["d","M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.5 7.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z"],["class","card cartas","style","width: 18rem;",4,"ngFor","ngForOf"],[1,"card","cartas",2,"width","18rem"],["alt","imagen_Card",1,"card-img-top",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"col-md-6","espaciado"]],template:function(o,e){1&o&&(t._UZ(0,"app-navbar"),t.YNc(1,pt,7,3,"div",0),t.YNc(2,dt,8,2,"div",0),t._UZ(3,"app-footer")),2&o&&(t.xp6(1),t.Q6J("ngIf",0!=e.books.length),t.xp6(1),t.Q6J("ngIf",0==e.books.length))},dependencies:[p.sg,p.O5,f.S,Z.c,s.rH,s.Od],styles:[".espacio[_ngcontent-%COMP%]{margin-top:1em;margin-left:1em}.espaciado[_ngcontent-%COMP%]{padding:2em}"]});const ut=[{path:"",children:[{path:"addBook",canActivate:[q.A],component:v},{path:"deleteBook/:id",canActivate:[q.A],component:_},{path:"list",component:k},{path:"updateBook/:id",canActivate:[q.A],component:A},{path:"listByCat/:id",component:U},{path:"**",redirectTo:"books"}]}];class h{}h.\u0275fac=function(o){return new(o||h)},h.\u0275mod=t.oAB({type:h}),h.\u0275inj=t.cJS({imports:[s.Bz.forChild(ut)]});var mt=a(4466),gt=a(1997),ht=a(1035),bt=a(2909);class b{}b.\u0275fac=function(o){return new(o||b)},b.\u0275mod=t.oAB({type:b}),b.\u0275inj=t.cJS({providers:[{provide:y.TP,useClass:ht.e,multi:!0}],imports:[p.ez,h,mt.m,T.U$,F.hJ,gt.U,y.JF,bt.kW,s.Bz,I.j,n.UX,n.u5]})}}]);