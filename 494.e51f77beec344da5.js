"use strict";(self.webpackChunkLibreriaVillarrealVicente=self.webpackChunkLibreriaVillarrealVicente||[]).push([[494],{9494:(I,b,s)=>{s.r(b),s.d(b,{AuthModule:()=>m});var f=s(6895),a=s(7825),_=s(5226),l=s.n(_),o=s(8256),h=s(9298),r=s(433);const y=["loginForm"];function x(n,t){1&n&&(o.TgZ(0,"span",16),o._uU(1," Username must be longer than 3 letters "),o.qZA())}function C(n,t){1&n&&(o.TgZ(0,"span",16),o._uU(1," Password must be longer than 3 letters "),o.qZA())}const Z=function(){return["register"]},v=function(){return{exact:!0}},w=function(){return["/"]};class u{constructor(t,e){this.router=t,this.loginService=e}ngOnInit(){this.isLoggedIn=this.loginService.isAuthenticated()}signIn(){console.log("Username: ",this.loginForm.value.username,"Password: ",this.loginForm.value.password),this.loginService.login(this.loginForm.value.username,this.loginForm.value.password).subscribe({next:t=>{t?(l().fire({icon:"success",title:"Successful session start",text:"\xa1Welcome!"}),this.isLoggedIn=!0,this.router.navigate(["/"])):l().fire({icon:"error",title:"Oops...",text:"Incorrect username or password."})}})}logOut(){this.loginService.logout(),this.isLoggedIn=!1}nombreValido(t){return this.loginForm?.controls[t]?.invalid&&this.loginForm?.controls[t]?.touched}passwordValida(){return this.loginForm?.controls.password.invalid&&this.loginForm?.controls.password.touched}onSubmit(){if(this.loginForm.valid)return console.log("Exito")}}function O(n,t){1&n&&(o.TgZ(0,"span",15),o._uU(1," must be 3 letters "),o.qZA())}function M(n,t){1&n&&(o.TgZ(0,"span",15),o._uU(1," must be a valid Email "),o.qZA())}function P(n,t){1&n&&(o.TgZ(0,"span",15),o._uU(1," It must be a password of more than 8 letters "),o.qZA())}function F(n,t){1&n&&(o.TgZ(0,"span",15),o._uU(1," It must be a password of more than 8 letters "),o.qZA())}function A(n,t){1&n&&(o.TgZ(0,"span",15),o._uU(1," Passwords must match "),o.qZA())}u.\u0275fac=function(t){return new(t||u)(o.Y36(a.F0),o.Y36(h.e))},u.\u0275cmp=o.Xpm({type:u,selectors:[["app-login"]],viewQuery:function(t,e){if(1&t&&o.Gf(y,5),2&t){let i;o.iGM(i=o.CRH())&&(e.loginForm=i.first)}},decls:24,vars:11,consts:[[1,"form-bg"],["action","#","method","post",1,"login-form","login",3,"ngSubmit"],["loginForm","ngForm"],[1,"form-inner"],[1,"text-center","mb-4"],["src","https://res.cloudinary.com/dx46uo2cv/image/upload/v1675940571/Logo_Librer%C3%ADa_Lineal_Azul_Rosa__1_-removebg-preview_vo8d1z.png","alt","Logo","width","85","height","85",1,"mb-3"],[1,"form-title","mb-3"],[1,"form-floating","mb-3"],["type","text","id","username","name","username","placeholder","Nombre de Usuario","required","","ngModel","","name","username","minlength","3",1,"form-control"],["for","username"],["class","form-text text-danger",4,"ngIf"],["type","password","id","password","name","password","placeholder","**************","required","","ngModel","","name","password","minlength","3",1,"form-control"],["for","password"],["type","submit",1,"btn","btn-primary","w-100",3,"disabled"],["type","submit","id","register-btn","routerLinkActive","active",1,"btn","btn-secondary","w-100",3,"routerLink","routerLinkActiveOptions"],["button","","type","button","href","#","routerLinkActive","active",1,"btn","btn-secondary","w-100",3,"routerLink","routerLinkActiveOptions"],[1,"form-text","text-danger"]],template:function(t,e){if(1&t&&(o._UZ(0,"div",0),o.TgZ(1,"form",1,2),o.NdJ("ngSubmit",function(){return e.signIn()}),o.TgZ(3,"div",3)(4,"div",4),o._UZ(5,"img",5),o.TgZ(6,"h2",6),o._uU(7,"Log In"),o.qZA()(),o.TgZ(8,"div",7),o._UZ(9,"input",8),o.TgZ(10,"label",9),o._uU(11,"Username"),o.qZA(),o.YNc(12,x,2,0,"span",10),o.qZA(),o.TgZ(13,"div",7),o._UZ(14,"input",11),o.TgZ(15,"label",12),o._uU(16,"Password"),o.qZA(),o.YNc(17,C,2,0,"span",10),o.qZA(),o.TgZ(18,"button",13),o._uU(19,"Log in"),o.qZA(),o.TgZ(20,"button",14),o._uU(21,"Register"),o.qZA(),o.TgZ(22,"button",15),o._uU(23,"Back to Home"),o.qZA()()()),2&t){const i=o.MAs(2);o.xp6(12),o.Q6J("ngIf",e.nombreValido("username")),o.xp6(5),o.Q6J("ngIf",e.nombreValido("password")),o.xp6(1),o.Q6J("disabled",i.invalid),o.xp6(2),o.Q6J("routerLink",o.DdM(7,Z))("routerLinkActiveOptions",o.DdM(8,v)),o.xp6(2),o.Q6J("routerLink",o.DdM(9,w))("routerLinkActiveOptions",o.DdM(10,v))}},dependencies:[f.O5,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.wO,r.On,r.F,a.rH,a.Od],styles:['.login-form[_ngcontent-%COMP%]{position:relative;max-width:400px;margin:0 auto;padding:30px;border:1px solid #ddd;border-radius:5px;background-color:#fff}.form-bg[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:-1;background:url(https://pixy.org/src2/577/5775865.jpg) center/cover no-repeat fixed;filter:blur(5px)}.form-inner[_ngcontent-%COMP%]{position:relative;z-index:1}.form-title[_ngcontent-%COMP%]{text-align:center;font-weight:700}.form-floating[_ngcontent-%COMP%]{position:relative}.form-floating[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:calc(2.5rem + 2px)}.form-floating[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{z-index:2}.form-floating[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;padding:.5rem;pointer-events:none;border:1px solid transparent;transform-origin:top left;transition:all .1s ease-in-out}.form-floating[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:placeholder-shown) + label[_ngcontent-%COMP%]{transform:translateY(-1rem) scale(.85);opacity:.6}.form-floating[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%]{transform:translateY(-1rem) scale(.85);opacity:.6}.btn-primary[_ngcontent-%COMP%]{background-color:#1abc9c;border-color:#1abc9c}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#148f77;border-color:#000}.btn-secondary[_ngcontent-%COMP%]{position:relative;overflow:hidden;background-color:transparent;border-color:transparent;color:#1abc9c;margin-top:10px}.btn-secondary[_ngcontent-%COMP%]:hover{color:#fff}.btn-secondary[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:50%;transform:translate(-50)}.login[_ngcontent-%COMP%]{margin-top:15em}']});const L=function(){return["/login"]};class g{constructor(t,e,i){this.fb=t,this.router=e,this.servicio=i,this.myForm=this.fb.group({nombre:["",[r.kI.required,r.kI.minLength(3)]],email:["",[r.kI.required,r.kI.email]],password:["",[r.kI.required,r.kI.minLength(8)]],confirPassword:["",[r.kI.required,r.kI.minLength(8),this.match("password")]]})}saveRegister(){const t=this.myForm.get("nombre")?.value,e=this.myForm.get("password")?.value,i=this.myForm.get("email")?.value;console.log(t,i,e),this.servicio.register(t,i,e).subscribe({next:d=>{d&&(console.log(d),this.myForm.valid?(l().fire({icon:"success",title:"Please check your email and verify your account",text:"\xa1Welcome to Libreria Villarreal, please verify your account!"}),this.router.navigate(["/"])):l().fire({icon:"error",title:"Oops...",text:"Something has gone wrong!",footer:'<a href="">Why do I have this issue?</a>'}))}})}isValidField(t){return this.myForm?.controls[t].errors&&this.myForm?.controls[t].touched&&this.myForm?.controls[t].invalid}isValidPass(t){return this.myForm?.controls[t].errors&&this.myForm?.controls[t].touched&&this.myForm?.controls[t].invalid||this.myForm?.controls[t].errors?.mismatch}match(t){return e=>e.parent?e.value===e.parent.get(t)?.value?null:{mismatch:!0}:null}ngOnInit(){}save(){this.myForm.valid&&this.myForm.markAllAsTouched()}}g.\u0275fac=function(t){return new(t||g)(o.Y36(r.qu),o.Y36(a.F0),o.Y36(h.e))},g.\u0275cmp=o.Xpm({type:g,selectors:[["app-register"]],decls:27,vars:8,consts:[[1,"form-bg"],[1,"container"],[1,"heading"],["action","#",1,"form",3,"formGroup","ngSubmit"],[1,"form-group"],["type","text","placeholder","Name","formControlName","nombre",1,"form-control"],[1,"fa","fa-user","form-control-feedback"],["class","form-text text-danger",4,"ngIf"],["type","email","placeholder","Email","formControlName","email",1,"form-control"],[1,"fa","fa-envelope","form-control-feedback"],["type","password","placeholder","Password","formControlName","password",1,"form-control"],[1,"fa","fa-lock","form-control-feedback"],["type","password","placeholder","Confirm Password","formControlName","confirPassword",1,"form-control"],["type","submit",1,"btn","btn-primary"],["button","","type","button","href","#","routerLinkActive","active",1,"btn","btn-danger",3,"routerLink"],[1,"form-text","text-danger"]],template:function(t,e){1&t&&(o._UZ(0,"div",0),o.TgZ(1,"div",1)(2,"h1",2),o._uU(3,"Register:"),o.qZA(),o.TgZ(4,"form",3),o.NdJ("ngSubmit",function(){return e.saveRegister()}),o.TgZ(5,"div",4),o._UZ(6,"input",5)(7,"i",6),o.YNc(8,O,2,0,"span",7),o.qZA(),o.TgZ(9,"div",4),o._UZ(10,"input",8)(11,"i",9),o.YNc(12,M,2,0,"span",7),o.qZA(),o.TgZ(13,"div",4),o._UZ(14,"input",10)(15,"i",11),o.YNc(16,P,2,0,"span",7),o.qZA(),o.TgZ(17,"div",4),o._UZ(18,"input",12)(19,"i",11),o.YNc(20,F,2,0,"span",7),o.YNc(21,A,2,0,"span",7),o.qZA(),o.TgZ(22,"button",13),o._uU(23,"Register"),o.qZA(),o._uU(24," \xa0\xa0 "),o.TgZ(25,"button",14),o._uU(26,"Back"),o.qZA()()()),2&t&&(o.xp6(4),o.Q6J("formGroup",e.myForm),o.xp6(4),o.Q6J("ngIf",e.isValidField("nombre")),o.xp6(4),o.Q6J("ngIf",e.isValidField("email")),o.xp6(4),o.Q6J("ngIf",e.isValidField("password")),o.xp6(4),o.Q6J("ngIf",e.isValidField("confirPassword")),o.xp6(1),o.Q6J("ngIf",e.isValidPass("confirPassword")),o.xp6(4),o.Q6J("routerLink",o.DdM(7,L)))},dependencies:[f.O5,r._Y,r.Fj,r.JJ,r.JL,a.rH,a.Od,r.sg,r.u],styles:[".form-bg[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:-1;background:url(https://images.alphacoders.com/104/thumb-1920-1046781.jpg) center/cover no-repeat fixed;filter:blur(5px)}.container[_ngcontent-%COMP%]{width:400px;margin:100px auto;border:none;background-color:#f7f7f7;transition:all .3s ease;box-shadow:0 14px 80px #22233a33;padding:30px 35px;border-radius:15px;overflow:hidden;overflow-y:hidden;overflow-x:hidden}.heading[_ngcontent-%COMP%]{font-weight:700;font-size:1.8rem;margin-top:0;margin-bottom:30px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600}.form-control[_ngcontent-%COMP%]{border-radius:10px;margin-top:1em;margin-bottom:1em}.form-control[_ngcontent-%COMP%]:focus{box-shadow:none;border-color:#b4d4f2}.btn-primary[_ngcontent-%COMP%]{background-color:#5c5ae5;border:none;transition:all .3s ease}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#4543d6}.form-control-feedback[_ngcontent-%COMP%]{position:absolute;top:50%;right:20px;transform:translateY(-50%);z-index:2;color:#ccc}"]});class p{constructor(t,e,i){this.route=t,this.servicio=e,this.router=i}ngOnInit(){this.route.queryParams.subscribe(t=>{this.servicio.verify(t.username||null,t.code||null).subscribe({next:d=>{d&&(l().fire({icon:"success",title:"Verification completed successfully",text:"\xa1Welcome to Libreria Villarreal!"}),this.router.navigate(["/"]))},error:d=>{l().fire({icon:"error",title:"Oops...",text:"Something has gone wrong!"})}})})}}p.\u0275fac=function(t){return new(t||p)(o.Y36(a.gz),o.Y36(h.e),o.Y36(a.F0))},p.\u0275cmp=o.Xpm({type:p,selectors:[["app-verify"]],decls:0,vars:0,template:function(t,e){},encapsulation:2});const T=[{path:"",children:[{path:"",component:u},{path:"register",component:g},{path:"verify",component:p}]}];class c{}c.\u0275fac=function(t){return new(t||c)},c.\u0275mod=o.oAB({type:c}),c.\u0275inj=o.cJS({imports:[[a.Bz.forChild(T)]]});var k=s(529),U=s(4466);class m{}m.\u0275fac=function(t){return new(t||m)},m.\u0275mod=o.oAB({type:m}),m.\u0275inj=o.cJS({imports:[f.ez,c,r.u5,a.Bz,r.UX,k.JF,U.m]})}}]);