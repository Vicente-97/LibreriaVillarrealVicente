"use strict";(self.webpackChunkLibreriaVillarrealVicente=self.webpackChunkLibreriaVillarrealVicente||[]).push([[6],{9006:(w,u,e)=>{e.r(u),e.d(u,{ShoppingModule:()=>p});var d=e(6895),b=e(4466),r=e(433),f=e(529),c=e(7825),C=e(5226),v=e.n(C),t=e(8256),Z=e(6217),x=e(4696),T=e(5227);function k(i,o){if(1&i){const n=t.EpF();t.TgZ(0,"tr")(1,"td"),t._UZ(2,"img",8),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.ALo(9,"currency"),t.qZA(),t.TgZ(10,"td")(11,"input",9),t.NdJ("ngModelChange",function(l){const h=t.CHM(n).$implicit;return t.KtG(h.cantidad=l)})("ngModelChange",function(l){const h=t.CHM(n).$implicit,y=t.oxw();return t.KtG(y.updateItem(h,l))}),t.qZA()(),t.TgZ(12,"button",10),t.NdJ("click",function(){const m=t.CHM(n).$implicit,h=t.oxw();return t.KtG(h.removeItem(m.book))}),t.O4$(),t.TgZ(13,"svg",11),t._UZ(14,"path",12),t.qZA(),t._uU(15," \xa0Delete"),t.qZA()()}if(2&i){const n=o.$implicit;t.xp6(2),t.Q6J("src",n.book.img,t.LSH),t.xp6(2),t.Oqu(n.book.isbn),t.xp6(2),t.Oqu(n.book.title),t.xp6(2),t.Oqu(t.lcZ(9,6,n.book.price)),t.xp6(3),t.s9C("max",n.book.stock),t.Q6J("ngModel",n.cantidad)}}function M(i,o){1&i&&(t.TgZ(0,"button",13),t.O4$(),t.TgZ(1,"svg",14),t._UZ(2,"path",15),t.qZA(),t._uU(3," \xa0Buy Now"),t.qZA())}const A=function(){return["/books/list"]};class g{constructor(o,n){this.shopping=o,this.route=n,this.json={isbn:"",title:"",dateBook:"",author:"",price:"",stock:"",category:"",cantidad:0},this.books=this.shopping.getItems(),this.total=this.shopping.getTotal()}updateTotalPrice(){this.total=this.shopping.getTotal()}clearCart(){this.shopping.clearCart(),this.books=this.shopping.getItems(),this.shopping.saveCartToSession(),this.total=this.shopping.getTotal()}removeItem(o){this.shopping.eliminarDelCarrito(o),this.books=this.shopping.getItems(),this.shopping.saveCartToSession(),this.total=this.shopping.getTotal()}updateItem(o,n){this.shopping.actualizarCantidad(o,n),this.shopping.getTotal(),this.updateTotalPrice(),this.shopping.saveCartToSession()}addBuy(){for(let o of this.books){this.json.isbn=o.book.isbn,this.json.title=o.book.title,this.json.datebook=o.book.dateBook,this.json.author=o.book.author,this.json.price=o.book.price,this.json.stock=o.book.stock,this.json.category=o.book.category,this.json.cantidad=o.cantidad;let n=o.cantidad,a=localStorage.getItem("username");console.log(n),console.log(a),console.log(this.json),null!=a&&this.shopping.addBuy(this.json,n,a).subscribe({next:l=>{l&&(v().fire({icon:"success",title:"Compra exitosa",text:"\xa1Disfuta sus libros!"}),this.shopping.clearCart(),this.route.navigate(["/books/list"]))}}),n=0}}}g.\u0275fac=function(o){return new(o||g)(t.Y36(Z.F),t.Y36(c.F0))},g.\u0275cmp=t.Xpm({type:g,selectors:[["app-shopping-cart"]],decls:24,vars:5,consts:[["button","","type","button","href","#","routerLinkActive","active",1,"btn","btn-danger","espaciado",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-arrow-left-circle-fill"],["d","M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.5 7.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z"],[1,"table"],[4,"ngFor","ngForOf"],[1,"botones-container"],["method","post","action","#","enctype","multipart/form-data",3,"ngSubmit"],["class","comprar-btn","type","submit",4,"ngIf"],["alt","imgBook","width","120","height","120",3,"src"],["type","number","aria-label","quantity","min","1",3,"ngModel","max","ngModelChange"],["aria-label","delete",1,"borrar-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-trash-fill"],["d","M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z"],["type","submit",1,"comprar-btn"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-bag-heart-fill"],["d","M11.5 4v-.5a3.5 3.5 0 1 0-7 0V4H1v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4h-3.5ZM8 1a2.5 2.5 0 0 1 2.5 2.5V4h-5v-.5A2.5 2.5 0 0 1 8 1Zm0 6.993c1.664-1.711 5.825 1.283 0 5.132-5.825-3.85-1.664-6.843 0-5.132Z"]],template:function(o,n){1&o&&(t._UZ(0,"app-navbar"),t.TgZ(1,"h2"),t._uU(2,"Cart"),t.qZA(),t.TgZ(3,"button",0),t.O4$(),t.TgZ(4,"svg",1),t._UZ(5,"path",2),t.qZA(),t._uU(6," \xa0Back"),t.qZA(),t.kcU(),t.TgZ(7,"table",3)(8,"thead")(9,"tr")(10,"th"),t._uU(11,"Name"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Price"),t.qZA()()(),t.TgZ(14,"tbody"),t.YNc(15,k,16,8,"tr",4),t.qZA()(),t.TgZ(16,"h5")(17,"p"),t._uU(18),t.qZA()(),t.TgZ(19,"div",5)(20,"form",6),t.NdJ("ngSubmit",function(){return n.addBuy()}),t.YNc(21,M,4,0,"button",7),t.qZA()(),t._UZ(22,"br")(23,"app-footer")),2&o&&(t.xp6(3),t.Q6J("routerLink",t.DdM(4,A)),t.xp6(12),t.Q6J("ngForOf",n.books),t.xp6(3),t.hij("Total: ",n.total," $"),t.xp6(3),t.Q6J("ngIf",n.books.length))},dependencies:[x.S,T.c,d.sg,d.O5,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.qQ,r.Fd,r.On,r.F,c.rH,c.Od,d.H9],styles:["table[_ngcontent-%COMP%]{border-collapse:collapse;width:100%;margin-bottom:1rem;background-color:transparent}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:.75rem;vertical-align:top;border-top:1px solid #dee2e6;text-align:left}th[_ngcontent-%COMP%]{font-weight:500;background-color:#f8f9fa;border-bottom:2px solid #dee2e6}td[_ngcontent-%COMP%]{border-bottom:1px solid #dee2e6}.botones-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:1rem;flex-wrap:wrap}.comprar-btn[_ngcontent-%COMP%]{background-color:green;color:#fff;border:none;padding:.5rem;border-radius:4px;cursor:pointer;margin-right:1em}.borrar-btn[_ngcontent-%COMP%]{background-color:red;color:#fff;border:none;padding:.5rem;border-radius:4px;cursor:pointer}.espaciado[_ngcontent-%COMP%]{margin:.5em}"]});const S=[{path:"",children:[{path:"list",component:g}]}];class s{}s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[c.Bz.forChild(S)]});class p{}p.\u0275fac=function(o){return new(o||p)},p.\u0275mod=t.oAB({type:p}),p.\u0275inj=t.cJS({imports:[s,b.m,d.ez,r.u5,f.JF,c.Bz]})}}]);