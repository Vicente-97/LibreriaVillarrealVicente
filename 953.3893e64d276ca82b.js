"use strict";(self.webpackChunkLibreriaVillarrealVicente=self.webpackChunkLibreriaVillarrealVicente||[]).push([[953],{3953:(H,_,s)=>{s.r(_),s.d(_,{UsersModule:()=>u});var U=s(6895),l=s(7825),v=s(6752),e=s(8256);class d{}d.\u0275fac=function(t){return new(t||d)},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-adduser"]],decls:2,vars:0,template:function(t,n){1&t&&(e.TgZ(0,"p"),e._uU(1,"adduser works!"),e.qZA())},encapsulation:2});var A=s(5226),h=s.n(A),b=s(41),r=s(433);const y=["deleteUser"],w=function(){return["/user/list"]};class p{constructor(t,n,i){this.servicio=t,this.route=n,this.router=i}ngOnInit(){this.username=this.route.snapshot.params.id,console.log(this.username),this.servicio.getUser(this.username).subscribe({next:t=>{this.username=t.username,this.name=t.name,this.email=t.email,this.img=t.img,this.user=t}})}deletedUser(){this.servicio.deleteUser(this.username).subscribe({next:t=>{t&&(console.log(t),this.deleteUserForm.valid?(h().fire({icon:"success",title:"User deleted sucess",text:"\xa1User deleted!"}),this.router.navigate(["/user/list"])):h().fire({icon:"error",title:"Oops...",text:"sorry!",footer:'<a href="">Why do I have this issue?</a>'}))}})}}p.\u0275fac=function(t){return new(t||p)(e.Y36(b.K),e.Y36(l.gz),e.Y36(l.F0))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-delete-user"]],viewQuery:function(t,n){if(1&t&&e.Gf(y,5),2&t){let i;e.iGM(i=e.CRH())&&(n.deleteUserForm=i.first)}},decls:24,vars:6,consts:[[1,"container"],[1,"heading"],["action","#","method","post",1,"form",3,"ngSubmit"],["deleteUser","ngForm"],[1,"form-group"],["alt","avatar",1,"rounded-circle","img-fluid",2,"width","150px",3,"src"],["for","input2"],["type","text","id","nombre","placeholder","Introduce el nombre","required","","ngModel","","name","name","readonly","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","id","nombre","placeholder","Introduce el nombre","required","","ngModel","","name","username","readonly","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","id","nombre","placeholder","Introduce el nombre","required","","ngModel","","name","email","readonly","",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-danger","espacioButton"],["button","","type","button","href","#","routerLinkActive","active",1,"btn","btn-primary",3,"routerLink"]],template:function(t,n){1&t&&(e.TgZ(0,"body")(1,"div",0)(2,"h1",1),e._uU(3,"Delete User"),e.qZA(),e.TgZ(4,"form",2,3),e.NdJ("ngSubmit",function(){return n.deletedUser()}),e.TgZ(6,"div",4)(7,"div",4),e._UZ(8,"img",5),e.qZA(),e.TgZ(9,"label",6),e._uU(10,"Name:"),e.qZA(),e.TgZ(11,"input",7),e.NdJ("ngModelChange",function(a){return n.name=a}),e.qZA()(),e.TgZ(12,"div",4)(13,"label",6),e._uU(14,"Username"),e.qZA(),e.TgZ(15,"input",8),e.NdJ("ngModelChange",function(a){return n.username=a}),e.qZA()(),e.TgZ(16,"div",4)(17,"label",6),e._uU(18,"Username"),e.qZA(),e.TgZ(19,"input",9),e.NdJ("ngModelChange",function(a){return n.email=a}),e.qZA()(),e.TgZ(20,"button",10),e._uU(21,"Delete User"),e.qZA(),e.TgZ(22,"button",11),e._uU(23,"Back"),e.qZA()()()()),2&t&&(e.xp6(8),e.s9C("src",n.user.img,e.LSH),e.xp6(3),e.Q6J("ngModel",n.name),e.xp6(4),e.Q6J("ngModel",n.username),e.xp6(4),e.Q6J("ngModel",n.email),e.xp6(3),e.Q6J("routerLink",e.DdM(5,w)))},dependencies:[r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.On,r.F,l.rH,l.Od],styles:["body[_ngcontent-%COMP%]{background-image:url(https://images6.alphacoders.com/407/407515.jpg);background-size:cover;background-position:center;background-repeat:no-repeat;height:100vh;overflow:hidden}.container[_ngcontent-%COMP%]{width:400px;margin:100px auto;border:none;background-color:#f7f7f7;transition:all .3s ease;box-shadow:0 14px 80px #22233a33;padding:30px 35px;border-radius:15px;overflow:hidden}.heading[_ngcontent-%COMP%]{font-weight:700;font-size:1.8rem;margin-top:0;margin-bottom:30px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600}.form-control[_ngcontent-%COMP%]{border-radius:10px;margin-top:1em;margin-bottom:1em}.form-control[_ngcontent-%COMP%]:focus{box-shadow:none;border-color:#b4d4f2}.btn-primary[_ngcontent-%COMP%]{background-color:#5c5ae5;border:none;transition:all .3s ease}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#4543d6}.form-control-feedback[_ngcontent-%COMP%]{position:absolute;top:50%;right:20px;transform:translateY(-50%);z-index:2;color:#ccc}.formulario[_ngcontent-%COMP%]{padding-top:15em}"]});var Z=s(9298),C=s(4696),T=s(5227),f=s(7318),x=s(805);function M(o,t){1&o&&(e.TgZ(0,"tr")(1,"th",11),e._uU(2,"Username"),e._UZ(3,"p-sortIcon",12),e.qZA(),e.TgZ(4,"th",13),e._uU(5,"Name"),e._UZ(6,"p-sortIcon",14),e.qZA(),e.TgZ(7,"th",15),e._uU(8,"Email"),e._UZ(9,"p-sortIcon",16),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Img"),e.qZA()())}const q=function(o){return["/user/deleteUser",o]};function F(o,t){if(1&o&&(e.TgZ(0,"button",20),e.O4$(),e.TgZ(1,"svg",21),e._UZ(2,"path",22),e.qZA(),e._uU(3,"Delete"),e.qZA()),2&o){const n=e.oxw(2).$implicit;e.Q6J("routerLink",e.VKq(1,q,n.username))}}function P(o,t){if(1&o&&(e.TgZ(0,"td"),e.YNc(1,F,4,3,"button",19),e.qZA()),2&o){const n=e.oxw(3);e.xp6(1),e.Q6J("ngIf",n.isAdmin)}}function I(o,t){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._UZ(8,"img",17),e.qZA(),e.YNc(9,P,2,1,"td",18),e.qZA()),2&o){const n=t.$implicit,i=e.oxw(2);e.xp6(2),e.Oqu(n.username),e.xp6(2),e.Oqu(n.name),e.xp6(2),e.Oqu(n.email),e.xp6(2),e.Q6J("src",n.img,e.LSH),e.xp6(1),e.Q6J("ngIf",n.username!=i.username)}}const J=function(){return[10]};function O(o,t){if(1&o&&(e.TgZ(0,"p-table",7,8),e.YNc(2,M,12,0,"ng-template",9),e.YNc(3,I,10,5,"ng-template",10),e.qZA()),2&o){const n=e.oxw();e.Q6J("value",n.users)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",e.DdM(5,J))}}class c{constructor(t,n){this.servicio=t,this.authService=n,this.users=[],this.username=localStorage.getItem("username"),this.jwt=null}ngOnInit(){this.getUser(),this.jwt=localStorage.getItem("jwt"),this.userDetails=localStorage.getItem("username"),this.jwt&&(this.isAdmin=this.authService.isUserAdmin(this.jwt))}getUser(){this.servicio.getUsers().subscribe({next:t=>{this.users=t}})}}function L(o,t){1&o&&(e.TgZ(0,"span",25),e._uU(1," must be 3 letters "),e.qZA())}function S(o,t){1&o&&(e.TgZ(0,"span",25),e._uU(1," must be a valid Email "),e.qZA())}function N(o,t){1&o&&(e.TgZ(0,"span",25),e._uU(1," It must be a password of more than 8 letters "),e.qZA())}function k(o,t){1&o&&(e.TgZ(0,"span",25),e._uU(1," It must be a password of more than 8 letters "),e.qZA())}function Q(o,t){1&o&&(e.TgZ(0,"span",25),e._uU(1," Passwords must match "),e.qZA())}c.\u0275fac=function(t){return new(t||c)(e.Y36(b.K),e.Y36(Z.e))},c.\u0275cmp=e.Xpm({type:c,selectors:[["app-list"]],decls:10,vars:1,consts:[[1,"container-fluid"],[1,"col"],[1,"row"],[1,"col-md-6"],[1,"m-4"],[1,"row","d-flex","justify-content-center","w-100"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","class","my-datatable",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions",4,"ngIf"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",1,"my-datatable",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pSortableColumn","isbn"],["field","username"],["pSortableColumn","title"],["field","name"],["pSortableColumn","author"],["field","email"],["alt","imagenUser","width","120","height","120",1,"imgRedonda",3,"src"],[4,"ngIf"],["button","","type","button","class","btn btn-danger","href","#","routerLinkActive","active",3,"routerLink",4,"ngIf"],["button","","type","button","href","#","routerLinkActive","active",1,"btn","btn-danger",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-trash-fill"],["d","M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z"]],template:function(t,n){1&t&&(e._UZ(0,"app-navbar"),e.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h1",4),e._uU(6,"User List"),e.qZA()()(),e.TgZ(7,"div",5),e.YNc(8,O,4,6,"p-table",6),e.qZA()()(),e._UZ(9,"app-footer")),2&t&&(e.xp6(8),e.Q6J("ngIf",n.users))},dependencies:[U.O5,C.S,T.c,f.iA,x.jx,f.lQ,f.fz,l.rH,l.Od],styles:[".imgRedonda[_ngcontent-%COMP%]{width:110px;height:80px;border-radius:100px}"]});const j=function(){return["/books/list"]};class g{constructor(t,n,i,a,R){this.fb=t,this.router=n,this.servicio=i,this.route=a,this.authSer=R,this.user={},this.jwt=localStorage.getItem("jwt"),this.json={username:"",name:"",password:"",email:""},this.myForm=this.fb.group({nombre:["",[r.kI.required,r.kI.minLength(3)]],email:["",[r.kI.required,r.kI.email]],password:["",[r.kI.required,r.kI.minLength(8)]],confirPassword:["",[r.kI.required,r.kI.minLength(8),this.match("password")]],fotoPerfil:["",[r.kI.required]],fileSource:["",[r.kI.required]]})}isValidField(t){return this.myForm?.controls[t].errors&&this.myForm?.controls[t].touched&&this.myForm?.controls[t].invalid}isValidPass(t){return this.myForm?.controls[t].errors&&this.myForm?.controls[t].touched&&this.myForm?.controls[t].invalid||this.myForm?.controls[t].errors?.mismatch}match(t){return n=>n.parent?n.value===n.parent.get(t)?.value?null:{mismatch:!0}:null}ngOnInit(){const t=this.route.snapshot.params.id;null!=this.jwt&&(this.username=this.authSer.returnUser(this.jwt)),this.servicio.getUser(this.username).subscribe({next:n=>{this.userActual=n,this.servicio.getUser(t).subscribe({next:i=>{this.user=i,this.userActual.username!=this.user.username&&this.router.navigate(["**"])}})}})}saveUpdate(){this.json.username=this.user.username,this.json.password=this.myForm.get("password")?.value,this.json.email=this.myForm.get("email")?.value,this.json.name=this.myForm.get("nombre")?.value,null==this.myForm.get("fileSource")&&(h().fire({icon:"error",title:"Oops...",text:"sorry, The photo cannot be empty!",footer:'<a href="">Why do I have this issue?</a>'}),this.router.navigate(["/"])),this.servicio.UpdateUser(this.json,this.myForm.get("fileSource")?.value,this.user.username).subscribe({next:t=>{t&&(window.location.reload(),this.myForm.reset(),h().fire({icon:"success",title:"User Updated",text:"\xa1User Update sucess!"}))}})}save(){this.myForm.valid&&this.myForm.markAllAsTouched()}onFileChange(t){t.target.files.length>0&&this.myForm.patchValue({fileSource:t.target.files[0]})}}g.\u0275fac=function(t){return new(t||g)(e.Y36(r.qu),e.Y36(l.F0),e.Y36(b.K),e.Y36(l.gz),e.Y36(Z.e))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-update-user"]],decls:64,vars:12,consts:[[1,"section"],[1,"container","py-5"],[1,"row"],[1,"col-lg-12"],[1,"card","mb-4"],[1,"titulo"],["action","#","enctype","multipart/form-data",1,"form",3,"formGroup","ngSubmit"],["align","center",1,"form-group"],["alt","avatar",1,"rounded-circle","img-fluid",2,"width","150px","height","150px",3,"src"],[1,"card-body"],[1,"col-sm-3"],[1,"mb-0"],[1,"col-sm-9"],["for","input2"],["type","text","placeholder","Name","formControlName","nombre","name","nombre",1,"form-control",3,"ngModel","ngModelChange"],["class","form-text text-danger",4,"ngIf"],["type","email","placeholder","Email","formControlName","email","name","email",1,"form-control",3,"ngModel","ngModelChange"],[1,"fa","fa-envelope","form-control-feedback"],["type","password","placeholder","*************************","formControlName","password","name","password",1,"form-control"],[1,"fa","fa-lock","form-control-feedback"],["type","password","placeholder","*************************","formControlName","confirPassword","name","confirmpassword",1,"form-control"],["type","file","placeholder","Photo","formControlName","fotoPerfil","name","fotoPerfil","required","",1,"form-control",3,"change"],["align","right"],["type","submit",1,"btn","btn-primary","espacioButton",3,"disabled"],["button","","type","button","href","#","routerLinkActive","active",1,"btn","btn-danger",3,"routerLink"],[1,"form-text","text-danger"]],template:function(t,n){1&t&&(e._UZ(0,"app-navbar"),e.TgZ(1,"section",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h3",5),e._uU(7,"Update Profile"),e.qZA(),e.TgZ(8,"form",6),e.NdJ("ngSubmit",function(){return n.saveUpdate()}),e.TgZ(9,"div",7),e._UZ(10,"img",8),e.qZA(),e.TgZ(11,"div",9)(12,"div",2)(13,"div",10)(14,"p",11),e._uU(15,"Name:"),e.qZA()(),e.TgZ(16,"div",12)(17,"label",13),e._uU(18,"Name:"),e.qZA(),e.TgZ(19,"input",14),e.NdJ("ngModelChange",function(a){return n.user.username=a}),e.qZA(),e.YNc(20,L,2,0,"span",15),e.qZA()(),e._UZ(21,"hr"),e.TgZ(22,"div",2)(23,"div",10)(24,"p",11),e._uU(25,"Email:"),e.qZA()(),e.TgZ(26,"div",12)(27,"input",16),e.NdJ("ngModelChange",function(a){return n.user.email=a}),e.qZA(),e._UZ(28,"i",17),e.YNc(29,S,2,0,"span",15),e.qZA()(),e._UZ(30,"hr"),e.TgZ(31,"div",2)(32,"div",10)(33,"p",11),e._uU(34,"Password :"),e.qZA()(),e.TgZ(35,"div",12),e._UZ(36,"input",18)(37,"i",19),e.YNc(38,N,2,0,"span",15),e.qZA()(),e._UZ(39,"hr"),e.TgZ(40,"div",2)(41,"div",10)(42,"p",11),e._uU(43,"Confirm password:"),e.qZA()(),e.TgZ(44,"div",12),e._UZ(45,"input",20)(46,"i",19),e.YNc(47,k,2,0,"span",15),e.YNc(48,Q,2,0,"span",15),e.qZA()(),e._UZ(49,"hr"),e.TgZ(50,"div",2)(51,"div",10)(52,"p",11),e._uU(53,"Profile pic:"),e.qZA()(),e.TgZ(54,"div",12)(55,"input",21),e.NdJ("change",function(a){return n.onFileChange(a)}),e.qZA(),e._UZ(56,"i",19),e.qZA()(),e._UZ(57,"hr"),e.TgZ(58,"div",22)(59,"button",23),e._uU(60,"Update user"),e.qZA(),e.TgZ(61,"button",24),e._uU(62,"Back"),e.qZA()()()()()()()()(),e._UZ(63,"app-footer")),2&t&&(e.xp6(8),e.Q6J("formGroup",n.myForm),e.xp6(2),e.s9C("src",n.user.img,e.LSH),e.xp6(9),e.Q6J("ngModel",n.user.username),e.xp6(1),e.Q6J("ngIf",n.isValidField("nombre")),e.xp6(7),e.Q6J("ngModel",n.user.email),e.xp6(2),e.Q6J("ngIf",n.isValidField("email")),e.xp6(9),e.Q6J("ngIf",n.isValidField("password")),e.xp6(9),e.Q6J("ngIf",n.isValidField("confirPassword")),e.xp6(1),e.Q6J("ngIf",n.isValidPass("confirPassword")),e.xp6(11),e.Q6J("disabled",n.myForm.invalid),e.xp6(2),e.Q6J("routerLink",e.DdM(11,j)))},dependencies:[U.O5,C.S,T.c,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.sg,r.u,l.rH,l.Od],styles:["#page-container[_ngcontent-%COMP%]{position:relative;min-height:100vh}#content-wrap[_ngcontent-%COMP%]{padding-bottom:2.5rem}#footer[_ngcontent-%COMP%]{position:absolute;bottom:0;width:100%;height:2.5rem}.espacioButton[_ngcontent-%COMP%]{margin:1em}.section[_ngcontent-%COMP%]{background-image:url(https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fimages6.alphacoders.com%2F348%2F348731.jpg&f=1&nofb=1&ipt=43d103699677cdeb562e799ab7081dbeb17a3b12cd375df1589e22de846d2a20&ipo=images)}"]});const Y=[{path:"",children:[{path:"addUser",canActivate:[v.A],component:d},{path:"deleteUser/:id",canActivate:[v.A],component:p},{path:"list",canActivate:[v.A],component:c},{path:"updateUser/:id",component:g},{path:"**",redirectTo:"user"}]}];class m{}m.\u0275fac=function(t){return new(t||m)},m.\u0275mod=e.oAB({type:m}),m.\u0275inj=e.cJS({imports:[l.Bz.forChild(Y)]});var D=s(4466),V=s(5593),z=s(1997);class u{}u.\u0275fac=function(t){return new(t||u)},u.\u0275mod=e.oAB({type:u}),u.\u0275inj=e.cJS({imports:[U.ez,m,D.m,r.UX,f.U$,V.hJ,z.U,l.Bz,r.u5]})}}]);